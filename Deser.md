# Insecure Deserealization

### 1. Что такое и с чем едят?

### Начнём с  сериализации

**Сериализация** - это способ превратить **обьект** в **поток байтов**, похожих на **строку**, сделать из **огромного набора данных** просто **строчку**. Строчка же потом может использоваться или куда-нибудь передаваться **(передача данных клиента, хранение сложных объектов в базе данных, передача данных через API на разных языках программирования)**. Мировым стандартом **сериализации** уже давно признан **JSON**. Но у некоторых языков существуют методы сериализации в библиотеках или в самом языке.

Приведу очень очень простой пример на Python (такие примеры будут на многих языках)
<details>
<summary>Пример сериализации на Python</summary>

Создадим класс нашего объекта:
```
class Student:
	def __init__(self, name, age, grade):
		self.name = name
		self.age = age
		self.grade = grade
```
Теперь создадим объект:
```
student = Student("Nikita",20,"SS")
```
Импортируем нашу библиотеку, сериализуем наши данные и выполним десериализацию:
```
import picle4 as picle

serialize_student = pickle.dumps(student)

deserialize_student = pickle.loads(serialize_student)
```
Подмечу, что данные будут выглядить как поток рандомных байтов, поэтому если и используют сериализацию, то её кодируют в base64.  Пример кодировки:
```
print(base64.b64encode(serialize_student)
```

У сериализованных объектов начало всегда одинаковое. Вот начало **base64 сериализованного объекта**:
**gASVR**QAAAAAAAACMCF9fbWFpbl9flIwHU3R1ZGVudJSTlCmBlH2UKIwEbmFtZZSMBk5pa2l0YZSMA2FnZZRLFIwFZ3JhZGWUjAJTU5R1Yi4=

Заметьте, что он начинается на **gASVR**. Так будет начинаться **любой сериализованный объект в python'e в base64 формате** :). Для примера ещё могу привести любую другую кодировку, но думаю это будет излишне. Можете сами поэксперементировать.
</details>

### А зачем нужна сериализация?

Хорошо, мы поняли что есть какая-то фигня, которая может объект преобразовать в строчку каких-то байтов. И, собственно, напрашивается. А нахрена это? <Никита помоги я сам хуй знает зачем это>

Примеры на других япах потом дополню

### Десериализация
Наверное вы уже догадались, что **десериализация** - обратный процесс сериализации. Т.е восстановление **объекта** из **потока байтов**. Т.е тут уже мы получаем эту строчку байтов и используем как хотим :) (не мы, а код конечно же, коонееееечноо))))

### Небезопасная десериализация
В общех чертах я рассказал что такое сериализация, десериализация, зачем оно нужно и показал примеры кода. 
Теперь нам нужно разобрать как мы, пентестеры, можем это использовать. А также нам нужно выработать свою методологию поиска этой редкой вулны. 
<!--stackedit_data:
eyJoaXN0b3J5IjpbMTg1OTgzNjEwM119
-->